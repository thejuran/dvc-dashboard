---
phase: 08-code-hardening
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - frontend/eslint.config.js
  - backend/**/*.py
  - frontend/src/**/*.tsx
  - frontend/src/**/*.ts
autonomous: true

must_haves:
  truths:
    - "No lint warnings remain in backend (ruff check passes with zero warnings)"
    - "No lint warnings remain in frontend (eslint passes with zero warnings)"
    - "No dead code remains: unused imports, unreachable branches, commented-out code all removed"
    - "Both frontend and backend build/check cleanly"
  artifacts:
    - path: "pyproject.toml"
      provides: "Ruff configuration for Python linting"
      contains: "[tool.ruff]"
  key_links:
    - from: "pyproject.toml"
      to: "backend/**/*.py"
      via: "ruff configuration governs all Python files"
      pattern: "\\[tool\\.ruff\\]"
    - from: "frontend/eslint.config.js"
      to: "frontend/src/**/*.{ts,tsx}"
      via: "eslint configuration governs all TypeScript files"
      pattern: "eslint"
---

<objective>
Eliminate all lint warnings and dead code from both frontend and backend codebases.

Purpose: Clean codebase with zero warnings, no dead code, no unused imports, no commented-out blocks. Required for QUAL-05 and prepares the codebase for open-source release (Phase 10).

Output: Zero-warning lint runs for both ruff (backend) and eslint (frontend), clean code throughout.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/08-code-hardening/08-CONTEXT.md

@frontend/eslint.config.js
@frontend/package.json
@backend/requirements-dev.txt
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure and run ruff on backend, fix all warnings</name>
  <files>pyproject.toml, backend/**/*.py, tests/**/*.py</files>
  <action>
1. **Create `pyproject.toml`** at project root with ruff configuration:

```toml
[tool.ruff]
target-version = "py312"
line-length = 100

[tool.ruff.lint]
select = [
    "E",    # pycodestyle errors
    "W",    # pycodestyle warnings
    "F",    # pyflakes (unused imports, undefined names)
    "I",    # isort (import sorting)
    "UP",   # pyupgrade (modern Python syntax)
    "B",    # flake8-bugbear (common bugs)
    "SIM",  # flake8-simplify
    "RUF",  # ruff-specific rules
]
ignore = [
    "E501",  # line length (handled by formatter if needed)
]

[tool.ruff.lint.isort]
known-first-party = ["backend"]

[tool.pytest.ini_options]
testpaths = ["tests"]
asyncio_mode = "auto"
```

2. **Run `ruff check backend/ tests/ --fix`** to auto-fix what's possible (unused imports, import sorting, simple style issues).

3. **Run `ruff check backend/ tests/`** to see remaining issues. Fix each manually:
   - **Unused imports (F401)**: Remove them.
   - **Unused variables (F841)**: Remove or prefix with `_` if intentionally unused.
   - **Undefined names (F821)**: Fix the import.
   - **Import sorting (I001)**: Auto-fixed by `--fix`.
   - **Unreachable code**: Remove dead branches.
   - **Commented-out code**: Remove entirely (git history preserves it).

4. **Scan for dead code manually:**
   - Search for `# TODO`, `# FIXME`, `# HACK` -- resolve or remove.
   - Search for commented-out function/class definitions -- remove.
   - Search for unused helper functions (defined but never called) -- remove.
   - Look for unreachable branches after early returns.

5. **Run `ruff check backend/ tests/`** again -- must return zero warnings.

6. **Also add pytest configuration** to the pyproject.toml (shown above) to consolidate config. This replaces any need for pytest.ini or conftest-level config.
  </action>
  <verify>
Run `cd /Users/julianamacbook/DVC && .venv/bin/ruff check backend/ tests/` -- zero warnings, zero errors, exit code 0.
Run `cd /Users/julianamacbook/DVC && python -m pytest tests/ -x -q` -- all tests still pass after cleanup.
  </verify>
  <done>Ruff configured and running clean. Zero lint warnings in backend and tests. No dead code, unused imports, or commented-out blocks remain in Python files.</done>
</task>

<task type="auto">
  <name>Task 2: Run eslint on frontend, fix all warnings</name>
  <files>frontend/eslint.config.js, frontend/src/**/*.tsx, frontend/src/**/*.ts</files>
  <action>
1. **Run `cd /Users/julianamacbook/DVC/frontend && npx eslint .`** to see current warnings.

2. **Run `cd /Users/julianamacbook/DVC/frontend && npx eslint . --fix`** to auto-fix what's possible.

3. **Fix remaining warnings manually:**
   - **Unused variables (@typescript-eslint/no-unused-vars)**: Remove or prefix with `_`.
   - **Missing deps in useEffect/useMemo/useCallback (react-hooks/exhaustive-deps)**: Add missing deps or restructure to avoid the warning. Use `// eslint-disable-next-line` only as absolute last resort and add a comment explaining why.
   - **`any` types (@typescript-eslint/no-explicit-any)**: Replace with proper types where possible.
   - **Unused imports**: Remove.
   - **Missing return types**: Add where required by config (if the current config flags these).

4. **Scan for dead code manually:**
   - Search for commented-out JSX/TSX -- remove.
   - Search for unused component files (defined but never imported) -- remove.
   - Search for unused exports in types/index.ts -- remove.
   - Search for unused hooks -- remove.
   - Check for `console.log` statements meant for debugging -- remove (but keep `console.error` in error boundaries).

5. **Run `cd /Users/julianamacbook/DVC/frontend && npx eslint .`** again -- must return zero warnings.

6. **Run `cd /Users/julianamacbook/DVC/frontend && npm run build`** to confirm everything still compiles.

7. **Verify TypeScript is clean too**: `cd /Users/julianamacbook/DVC/frontend && npx tsc --noEmit` -- zero errors.
  </action>
  <verify>
Run `cd /Users/julianamacbook/DVC/frontend && npx eslint .` -- zero warnings, zero errors.
Run `cd /Users/julianamacbook/DVC/frontend && npm run build` -- build succeeds.
Run `cd /Users/julianamacbook/DVC/frontend && npx tsc --noEmit` -- no type errors.
  </verify>
  <done>ESLint passes with zero warnings on all frontend files. No dead code, unused imports, or commented-out blocks remain in TypeScript/React files. Frontend builds and type-checks cleanly.</done>
</task>

</tasks>

<verification>
1. `ruff check backend/ tests/` -> zero output, exit code 0
2. `cd frontend && npx eslint .` -> zero output, exit code 0
3. `python -m pytest tests/ -x -q` -> all tests pass
4. `cd frontend && npm run build` -> build succeeds
5. `cd frontend && npx tsc --noEmit` -> no type errors
6. No commented-out code blocks remain in either codebase
</verification>

<success_criteria>
- Zero ruff warnings in backend + tests
- Zero eslint warnings in frontend
- No dead code: unused imports, unreachable branches, commented-out code all removed
- All tests pass
- Frontend builds and type-checks cleanly
- pyproject.toml exists with ruff + pytest config
</success_criteria>

<output>
After completion, create `.planning/phases/08-code-hardening/08-05-SUMMARY.md`
</output>
